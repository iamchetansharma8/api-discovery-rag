{
    "openapi": "3.0.3",
    "info": {
        "title": "Audit Document API",
        "version": "1.0"
    },
    "servers": [
        {
            "url": "https://api.natwest.com/documents/v1.0/audit"
        }
    ],
    "tags": [
        {
            "name": "Document Audit"
        }
    ],
    "paths": {
        "/audit": {
            "post": {
                "tags": [
                    "Document Audit"
                ],
                "summary": "Audit document events",
                "operationId": "auditUsingPOST",
                "parameters": [
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "JWT Bearer Token",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AuditRequestObject"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AuditResponseObject"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Not Found"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "AuditAttribute": {
                "title": "AuditAttribute",
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "SourceObjectId",
                        "description": "Attribute name for Auditing"
                    },
                    "operator": {
                        "type": "string",
                        "enum": [
                            "eq",
                            "gt",
                            "gte",
                            "lk",
                            "lt",
                            "lte",
                            "neq",
                            "sw"
                        ],
                        "example": "eq",
                        "description": "Operator like equals, greater than, etc."
                    },
                    "value": {
                        "type": "string",
                        "example": "E0583C80-0000-C717-86FB-56AE8EED6FA7",
                        "description": "ID of the object created within ECM"
                    }
                }
            },
            "AuditRequestObject": {
                "title": "AuditRequestObject",
                "type": "object",
                "properties": {
                    "DocumentSource": {
                        "type": "string",
                        "example": "tyl",
                        "description": "Specifies document source for request"
                    },
                    "EventName": {
                        "type": "string",
                        "example": "update",
                        "description": "Specifies audit EventName {update, create, delete, content}"
                    },
                    "auditAttribute": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AuditAttribute"
                        }
                    }
                }
            },
            "AuditResponseObject": {
                "title": "AuditResponseObject",
                "type": "object",
                "properties": {
                    "code": {
                        "type": "integer",
                        "format": "int32",
                        "example": 200,
                        "description": "HTTP style response code"
                    },
                    "fileData": {
                        "type": "string",
                        "example": "YEsDBBQACAgIAE9O7VQAAAAAAAAAAAAAAAATAAAAW0NvbnRlbnRfVHlwZXNdLnhtbLVTy27CMBD8lcjXKjb0UFUVgUMfxxap9ANce5NY+CWvofD3XQc4lFKJCnHyY2ZnZlf2ZLZxtlpDQhN8w8Z8xCrwKmjju4Z9LF7qe1Zhll5LGzw0zAc2m04W2whYUanHhvU5xwchUPXgJPIQwRPShuRkpmPqRJRqKTsQt6PRnVDBZ/C5zkWDTSdP0MqVzdXj7r5IN0zGaI2SmVKJtddHovVekCewAwd7E/GGCKx63pDKrhtCkYkzHI4Ly5nq3mguyWj4V7TQtkaBDmrlqIRDUdWg65iImLKBfc65TPlVOhIURJ4TioKk+SXeh7GokOAsw0K8yPGoW4wJpMYeIDvLsZcJ9HtO9Jh+h9hY8YNwxRx5a09MoQQYkGtOgFbupPGn3L9CWn6GsLyef3EY9n/ZDyCKYRkfcojhe0+/AVBLBwh6lMpxOwEAABwEAABQSwMEFAAICAgAT07tVAAAAAAAAAAAAAAAAAsAAABfcmVscy8ucmVsc62SwWrDMAyGX8Xo3jjtYIxRt5cy6G2M7gE0W0lMYsvY2pa9/cwuW0sKG+woJH3/B9J2P4dJvVEunqOBddOComjZ}",
                        "description": "File Data in Base64 encoded"
                    },
                    "message": {
                        "type": "string",
                        "example": "Success response",
                        "description": "Status message from ECM"
                    },
                    "status": {
                        "type": "string",
                        "example": "success",
                        "description": "HTTP style response message"
                    },
                    "length": {
                        "type": "number",
                        "example": 5712,
                        "description": "Size of document"
                    },
                    "mimeType": {
                        "type": "string",
                        "example": "application/vnd.ms-excel",
                        "description": "Format of document"
                    },
                    "filename": {
                        "type": "string",
                        "example": "Auditresult1648728039094.xlsx",
                        "description": "Filename where audit details are stored"
                    }
                }
            }
        }
    }
}